# Version 0.6.0 (unreleased)

## Implemented RFCs

- [RFC 66]: Simulation time
- [RFC 71]: `EnumView.matches`

## Language changes

```{eval-rst}
.. currentmodule:: amaranth.hdl
```

- Added: {class}`Period` for representing time periods. ([RFC 66])
- Changed: overriding {meth}`ValueCastable.from_bits` is now mandatory. ([RFC 51])
- Deprecated: the {py}`local=` argument to {class}`ClockDomain`. ([RFC 59])
- Removed: (deprecated in 0.4.0) {class}`Record`.
- Removed: (deprecated in 0.5.0) {class}`Memory` ([RFC 45])
- Removed: (deprecated in 0.5.0) public submodules of {mod}`amaranth.hdl`.
- Removed: (deprecated in 0.5.0) {meth}`Value.implies`.
- Removed: (deprecated in 0.5.0) {meth}`Const.width`, {meth}`Const.signed`, {meth}`Signal.width`, {meth}`Signal.signed`.
- Removed: (deprecated in 0.5.0) upwards propagation of clock domains. ([RFC 59])
- Removed: (deprecated in 0.5.0) {func}`amaranth.utils.log2_int`. ([RFC 17])

## Standard library changes

```{eval-rst}
.. currentmodule:: amaranth.lib
```

- Added: {py}`payload_init=` argument in {class}`amaranth.lib.stream.Signature`.
- Added: {meth}`enum.EnumView.matches`. ([RFC 71])
- Changed: (deprecated in 0.5.1) providing {meth}`io.PortLike.__add__` is now mandatory. ([RFC 69])
- Removed: (deprecated in 0.5.0) {mod}`amaranth.lib.coding`. ([RFC 63])

## Toolchain changes

- Added: {meth}`SimulatorContext.elapsed_time <amaranth.sim._async.SimulatorContext.elapsed_time>` for getting elapsed simulation time. ([RFC 66])
- Added: {meth}`Platform.default_clk_period <amaranth.build.plat.Platform.default_clk_period>`. ([RFC 66])
- Changed: {meth}`Simulator.add_clock <amaranth.sim.Simulator.add_clock>` now accepts a {class}`Period <amaranth.hdl.Period>` for {py}`period` and {py}`phase`. ([RFC 66])
- Changed: {meth}`Simulator.run_until <amaranth.sim.Simulator.run_until>` now accepts a {class}`Period <amaranth.hdl.Period>` for {py}`deadline`. ([RFC 66])
- Changed: {meth}`SimulatorContext.delay <amaranth.sim._async.SimulatorContext.delay>` now accepts a {class}`Period <amaranth.hdl.Period>` for {py}`interval`. ([RFC 66])
- Changed: {meth}`ResourceManager.add_clock_constraint <amaranth.build.res.ResourceManager.add_clock_constraint>` now accepts a {class}`Period <amaranth.hdl.Period>` for {py}`period`. ([RFC 66])
- Changed: {class}`Clock <amaranth.build.dsl.Clock>` now accepts a {class}`Period <amaranth.hdl.Period>` for {py}`period`. ([RFC 66])
- Changed: {attr}`Clock.period <amaranth.build.dsl.Clock.period>` now returns a {class}`Period <amaranth.hdl.Period>`. ([RFC 66])
- Deprecated: Passing a {class}`float` of seconds or hertz to any of the methods/arguments now accepting a {class}`Period <amaranth.hdl.Period>`. ([RFC 66])
- Deprecated: Passing {py}`frequency=` to {meth}`ResourceManager.add_clock_constraint <amaranth.build.res.ResourceManager.add_clock_constraint>`. ([RFC 66])
- Deprecated: Passing {py}`frequency=` to {class}`Clock <amaranth.build.dsl.Clock>`. ([RFC 66])
- Deprecated: {attr}`Clock.frequency <amaranth.build.dsl.Clock.frequency>`. ([RFC 66])
- Deprecated: {meth}`Platform.default_clk_frequency <amaranth.build.plat.Platform.default_clk_frequency>`. ([RFC 66])

## Platform integration changes

```{eval-rst}
.. currentmodule:: amaranth.vendor
```

- Changed: the Gowin platform now uses `nextpnr-himbaechel` rather than `nextpnr-gowin`.
